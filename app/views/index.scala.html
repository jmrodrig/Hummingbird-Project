@(story: controllers.json.Story, location: controllers.json.Location, edit: Boolean)

@main("") {

	<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/index.css")">
	<script src="/assets/javascripts/controls/index-view-handlers.js" type="text/javascript"></script>


	@if(story != null) {
		<title>LIR | @story.title</title>
		<meta name="description" content="@story.summary" />

		<!-- Twitter Card data -->
		<meta name="twitter:site" content="http://www.lostinreality.io/story/@story.id">
		<meta name="twitter:title" content="@story.title">
		<meta name="twitter:description" content="@story.summary">
		<meta name="twitter:image" content="http://www.lostinreality.io/uploads/images/@story.thumbnail">
		<!-- Open Graph data -->
		<meta property="og:title" content="@story.title" />
		<meta property="og:type" content="article" />
		<meta property="og:url" content="http://www.lostinreality.io/story/@story.id"/>
		<meta property="og:image" content="http://www.lostinreality.io/uploads/images/@story.thumbnail" />
		<meta property="og:description" content="@story.summary" />
	}

	@if(story == null && location != null) {
		<title>LIR | @location.name</title>

		<!-- Twitter Card data -->
		<meta name="twitter:site" content="http://www.lostinreality.io/@@@location.latitude,@location.longitude,@location.zoom">
		<meta name="twitter:title" content="LIR | @location.name">
		<!-- Open Graph data -->
		<meta property="og:title" content="LIR | @location.name" />
		<meta property="og:type" content="article" />
		<meta property="og:url" content="http://www.lostinreality.io/@@@location.latitude,@location.longitude,@location.zoom"/>

	}

	@if(story == null && location == null) {

		<title>LIR | location-based storytelling</title>
		<meta name="description" content="Explore the places around you with a map of stories. Sign up, download the app and start discovering." />

		<!-- Twitter Card data -->
		<meta name="twitter:site" content="http://www.lostinreality.io">
		<meta name="twitter:title" content="Lost in Reality">
		<meta name="twitter:description" content="Explore the places around you with a map of stories. Sign up, download the app and start discovering.">
		<meta name="twitter:image" content="@routes.Assets.at("images/lir_front.jpg")">
		<!-- Open Graph data -->
		<meta property="og:title" content="Lost in Reality" />
		<meta property="og:type" content="article" />
		<meta property="og:url" content="http://www.lostinreality.io"/>
		<meta property="og:image" content="@routes.Assets.at("images/lir_front.jpg")" />
		<meta property="og:description" content="Explore the places around you with a map of stories. Sign up, download the app and start discovering." />

	}

	<meta property="fb:app_id" content="1494692634127358" />

}{
	<!----------------->
	<!--   Content   -->
	<!----------------->

	<section id="content-wrapper">

		<div id="index-heros">
			<div id="heros-container">
				<div id="hero-1" class="hero-container" tab="1">
					<h1>Pick one place</h1>
					<div class="input-group">
			      <div class="input-group-btn">
			        <button class="btn btn-default ga-event-index-search" type="button"><span class="glyph icon-no-margins icon-15px flaticon-tool"></button>
			      </div>
						<input id="hero1-search-input" class="form-control ga-event-index-search" placeholder="Search for a place...">
			    </div>
					<div id="scroll-down-indicator">
						<div id="scroll-down-arrow">
							<span class="glyph icon-no-margins icon-40px flaticon-arrows-2">
						</div>
						<p><em>Or scroll down...</em></p>
					</div>
				</div>


				<div id="hero-2" class="hero-container" tab="2">
					<h1>Stories here, Stories there...</h1>
					<h4>
						Build a map with your favorite stories, your pictures and videos, and share them with friends.
						Check the stories and maps we picked for you.
					</h4>
					<div id="featured-stories-container" >
						<!-- <div class="lg-arrow-left"></div>
						<div class="lg-arrow-right"></div> -->
					</div>
				</div>


				<!-- <div id="hero-3" class="hero-container" tab="3">
					<h1>Save stories as you surf the web.</h1>
					<h4>
						Save articles from the web directly at your browser with the Web Clipper Chrome Extension.
						Clip any web page, youtube, vimeo and vine videos, instagrams, etc, and save them to your maps.<br>
						You can download it <a href="https://chrome.google.com/webstore/detail/lost-in-realitys-web-clip/mcmkieobolpjmddiobfhoaeceepnefih" >here</a>.
					</h4>
					<div id="web-clipper-banner" onclick="chrome.webstore.install()"></div>
				</div> -->


				<div id="hero-4" class="hero-container" tab="4">
					<h1>Sign up and spread the word.</h1>
					<div id="sign-up">
						<button id="sign-up-btn" type="button" class="btn btn-success btn-lg ga-event-navbar-signup">Sign up</button>
					</div>
					<div id="social">
						<a id="share-facebook-btn" href="https://www.facebook.com/pages/Lost-in-Reality-LiR/387253791289181" type="button" class="btn btn-icon"><span class="glyph-icon icon-no-margins icon-40px flaticon-social-2"></a>
						<a id="share-twitter-btn" href="https://twitter.com/LstnReality" type="button" class="btn btn-icon"><span class="glyph-icon icon-no-margins icon-40px flaticon-social-1"></a>
						<a id="share-email-btn" href="mailto:feedback@@lostinreality.pt?Subject=Feedback" type="button" class="btn btn-icon"><span class="glyph-icon icon-no-margins icon-40px flaticon-internet"></a>
					</div>
				</div>


				<div id="hero-5" class="hero-container" tab="5">
					<h1>Ready? Pick one place.</h1>
					<div class="input-group">
			      <div class="input-group-btn">
			        <button class="btn btn-default" type="button"><span class="glyph icon-no-margins icon-15px flaticon-tool ga-event-index-search"></button>
			      </div>
						<input id="hero5-search-input" class="form-control ga-event-index-search" placeholder="Search for a place...">
			    </div>
					<div id="logo-hero"></div>
				</div>

			</div>
		</div>

		<!-------------------------------->
		<!--  Index Map & Stories  -->
		<!-------------------------------->

		<div id="index-map-and-stories-container">

			<!----------------------->
			<!--  Index Map   -->
			<!----------------------->

			<div id="index-map-container" >
				<div id="map-canvas"></div>
				<div id="map-viewport">
					<div id="map-sight"></div>
					<div id="map-region"></div>
				</div>
			</div>

			<!------------------------------->
			<!--  Index Map Details   -->
			<!------------------------------->

			<div id="index-map-details-container">
				<div id="index-thumbnail-container">
					<span class="glyph-icon icon-no-margins icon-20px flaticon-nature">
				</div>
				<p id="index-details-name"></p>
			</div>

			<!----------------------------->
			<!--  Search & Controls Bar  -->
			<!----------------------------->

			<div id="search-and-controls-bar">
				<div class="input-group">
					<input id="search-input" class="form-control ga-event-index-search" placeholder="Search for a place...">
					<div class="input-group-btn">
						<!-- <button id="search-btn" type="button" class="btn btn-success" onclick="searchBoxGetPlaces()"><span class="glyph icon-no-margins icon-15px flaticon-search"></button> -->
						<button id="zoom-in" type="button" class="btn btn-default" onclick="zoomInMap()" data-toggle="tooltip" data-placement="bottom" title="Zoom in"><span class="glyph icon-no-margins icon-20px flaticon-multimedia"></button>
						<button id="zoom-out" type="button" class="btn btn-default" onclick="zoomOutMap()" data-toggle="tooltip" data-placement="bottom" title="Zoom out"><span class="glyph icon-no-margins icon-20px flaticon-search"></button>
					</div>
				</div>
				<button id="create-story-btn" type="button" class="btn btn-default ga-event-index-createstory" data-toggle="tooltip" data-placement="left" title="Create a new story."><span class="glyph icon-no-margins icon-15px flaticon-draw"></button>
			</div>

			<!--------------->
			<!--  Stories  -->
			<!--------------->

			<div id="story-containers-wrapper">
				<div id="story-grid-layout"></div>
				<div id="story-large-layout">
					<!-- <div id="story-large-layout-controllers">
						<div class="lg-arrow-left"></div>
						<div class="lg-arrow-right"></div>
					</div> -->
					<div id="story-large-layout-container"></div>
				</div>

			</div>

		</div>
	</section>

	<!----------------------------------->
	<!--  Create Story Options Modal   -->
	<!----------------------------------->

	<!-- Create Story modal -->
	<div id="create-story-modal" class="modal fade">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-body animate-transition">
					<div id="options">
						<h4 class="modal-title">Which type of story?</h4>
						<div id="single-story-opt-btn" class="div-btn" onclick="openCreateSingleStoryView()">
							<h4>One-Shot Story</h4>
							<p>A single location story for a fast and short story, a memoir or a note.</p>
						</div>
						<div id="regular-story-opt-btn" class="div-btn" onclick="openCreateStoryView()">
							<h4>Blank Page</h4>
							<p>A blank page to write freely with unlimited locations, in an article like format.</p>
						</div>
						<div id="article-story-opt-btn" class="div-btn" onclick="openCreateArticleStoryView()">
							<h4>Article</h4>
							<p>A story based on an article from other sources on the web.</p>
						</div>
					</div>
	      </div>
	    </div>
	  </div>
	</div>

	<!------------------------------------------->
	<!--  Create Article Story Options Modal   -->
	<!------------------------------------------->

	<!-- Create Story modal -->
	<div id="create-article-story-modal" class="modal fade">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-body animate-transition">
					<div id="url-prompt">
						<span>url:</span><input id="story-url-prompt" type="text">
						<button id="fetch-btn" class="btn btn-success" type=button onclick="fetchMetadataFromUrl()">Go</button>
					</div>
					<div id="story-block">
						<div id="story-image-container"></div>
						<span>Image link:</span><input id="story-image-url-input" type="text">
						<div id="story-details">
							<span>Title:</span><input id="story-title-input" type="text"> <br>
							<span>Description:</span><textarea id="story-description-input" type="text" rows="3"></textarea>
							<span>Tags: </span><span id="story-keywords"></span><input id="story-keywords-input" type="text">
							<button id="add-keyword-btn" class="btn btn-success" type=button onclick="addKeywordToArticle()">add</button> <br>
							<span>Location:</span><input id="story-location-input" > <br>
							<span>Author:</span><input id="story-author-input" type="text">
							<span>Date:</span><input id="story-date-input" type="text"> <br>
							<span>Source:</span><img id="story-source-icon"><input id="story-source-input" type="text"><br>
							<span>url:</span><input id="story-url-input" type="text">
						</div>
						<div id="map-container">
							<div id="mapbox-canvas"></div>
							<div id="map-viewport">
								<div id="map-sight"></div>
								<div id="map-region"></div>
							</div>
						</div>
						<button id="save-btn" class="btn btn-success" type=button onclick="saveArticleStory()">Save</button>
						<button id="cancel-btn" data-dismiss="modal" class="btn btn-default" type=button>Cancel</button>
		      </div>
				</div>
	    </div>
	  </div>
	</div>

	<!----------------------------------->
	<!--  Login/Signup Modal   -->
	<!----------------------------------->

	<!-- Signup modal -->
	<div id="signup-modal" class="signup-modal modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body animate-transition">
					<h4 class="modal-title">Enter your email to sign up</h4>
					<p>An email will be sent to this address with further sign up instructions.</p>
					<input id="signup-email-input" placeholder="your email" type="email"/>
					<div class="signup-alert-message"><p></p></div>
					<div class="controls">
						<button id="signup-btn" class="btn btn-success" type=button onclick="sendSignupEmail()">Sign Up</button>
						<button id="cancel-btn" data-dismiss="modal" class="btn btn-default" type=button>Not now, thanks!</button>
					</div>
				</div>
				<div class="grad-bar"></div>
			</div>
		</div>
	</div>

	<!-- Login modal -->
	<div id="login-modal" class="login-modal modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body animate-transition">
					<h4 class="modal-title">Enter your login credentials.</h4>
					<input id="login-email-input-1" placeholder="your email" type="email"/>
					<input id="login-password-input-1" placeholder="password" type="password"/>
					<div class="login-alert-message"><p></p></div>
					<button id="login-btn" class="btn btn-primary" type=button onclick="loginWithUserCredentials()">Log in</button>
					<button id="signup-btn" class="btn btn-success" type=button onclick="startSignup()">Sign Up</button>
					<button id="facebook-login-btn" class="btn btn-default" type=button onclick="loginWithFacebook()"></button>
					<button id="cancel-btn" data-dismiss="modal" class="btn btn-default" type=button>Not now, thanks!</button>
					<img id="lir-logo" src="/assets/images/lir-logo-banner-simple-small.png" alt="lir-logo">
				</div>
				<div class="grad-bar"></div>
			</div>
		</div>
	</div>

	<!-- Need login warning modal -->
	<div id="need-login-warning-modal" class="login-modal modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body animate-transition">
					<h4 class="modal-title warning">You need to log in first!</h4>
					<input id="login-email-input-2" placeholder="your email" type="email"/>
					<input id="login-password-input-2" placeholder="password" type="password"/>
					<div class="login-alert-message"><p></p></div>
					<button id="login-btn" class="btn btn-primary" type=button onclick="loginWithUserCredentials()">Log in</button>
					<button id="signup-btn" class="btn btn-success" type=button onclick="startSignup()">Sign Up</button>
					<a id="recover-password-link" href="/reset">Did you forget your password?</a>
					<button id="facebook-login-btn" class="btn" type=button onclick="loginWithFacebook()"></button>
					<button id="cancel-btn" data-dismiss="modal" class="btn btn-default" type=button>Not now, thanks!</button>
					<img id="lir-logo" src="/assets/images/lir-logo-banner-simple-small.png" alt="lir-logo">
				</div>
				<div class="grad-bar"></div>
			</div>
		</div>
	</div>

	<!---------------->
	<!--  Scripts   -->
	<!---------------->

	<script type="text/javascript">
		var editingMode = ("@edit" == "true") ? true : false;
		var target = new Object();
		if (document.cookie.includes(COOKIE_HISTORY_TAG)) {
			lircookie = document.cookie.split(COOKIE_HISTORY_TAG)[1]
			if (lircookie!= null && !lircookie.includes("undefined")) {
				var target = JSON.parse(document.cookie.split(COOKIE_HISTORY_TAG)[1]);
			}
			document.cookie = COOKIE_HISTORY_TAG + "; expires=Thu, 03 Jul 1987 13:13:13 UTC";
		} else {
			@if(location != null) {
				target.location = {
					latitude:@location.latitude,
					longitude:@location.longitude,
					zoom:@location.zoom
				}
			}
			@if(story != null) {
				target.storyid = @story.id;
			}
		}
		openPageOnTarget(target);
	</script>
}
